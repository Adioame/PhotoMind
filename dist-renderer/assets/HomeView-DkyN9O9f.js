import{d as k,o as h,c as y,a as t,u as H,b as q,e,w as s,r as u,f as c,g as U,h as f,t as T,i as C,j as Z,k as I}from"./index-b2OWAZnp.js";import{P as F}from"./PhotoGrid-CbLsguGP.js";import{S as J}from"./Search24Regular-N_JwTMUc.js";import{C as K}from"./CalendarToday24Regular-C2OphPV9.js";import{I as O,_ as Q}from"./_plugin-vue_export-helper-DZzl9uFm.js";const W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},X=k({name:"ArrowSync24Regular",render:function(i,l){return h(),y("svg",W,l[0]||(l[0]=[t("g",{fill:"none"},[t("path",{d:"M16.25 5.18a.75.75 0 0 0 .142 1.051a7.251 7.251 0 0 1-3.599 12.976l.677-.677a.75.75 0 0 0-.977-1.133l-.084.073l-2 2a.75.75 0 0 0-.073.976l.073.084l2 2a.75.75 0 0 0 1.133-.976l-.072-.084l-.75-.75A8.75 8.75 0 0 0 17.301 5.04a.75.75 0 0 0-1.051.141zm-5.72-3.71a.75.75 0 0 0 0 1.06l.75.75a8.75 8.75 0 0 0-4.85 15.47a.75.75 0 1 0 .956-1.157a7.251 7.251 0 0 1 3.82-12.8l-.676.677a.75.75 0 1 0 1.061 1.06l2-2a.75.75 0 0 0 0-1.06l-2-2a.75.75 0 0 0-1.06 0z",fill:"currentColor"})],-1)]))}}),Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},oo=k({name:"ChevronRight24Regular",render:function(i,l){return h(),y("svg",Y,l[0]||(l[0]=[t("g",{fill:"none"},[t("path",{d:"M8.47 4.22a.75.75 0 0 0 0 1.06L15.19 12l-6.72 6.72a.75.75 0 1 0 1.06 1.06l7.25-7.25a.75.75 0 0 0 0-1.06L9.53 4.22a.75.75 0 0 0-1.06 0z",fill:"currentColor"})],-1)]))}}),to={class:"home-container"},eo={class:"quick-actions"},so={class:"card-header"},no={class:"card-header"},ao={class:"card-header"},lo={class:"card-header"},ro={class:"card-example"},io={class:"recent-section"},uo={class:"section-header"},co={class:"sync-modal-content"},po={key:1},go=k({__name:"HomeView",setup(P){const i=U(),l=H(),x=u(!0),g=u(!1),S=u(0),A=u(0),m=u(!1),v=u(0),_=u([]),$=()=>!!window.photoAPI,b=n=>{const o=[{name:"日本东京",lat:35.6762,lng:139.6503},{name:"新疆乌鲁木齐",lat:43.8256,lng:87.6168},{name:"北京",lat:39.9042,lng:116.4074},{name:"上海",lat:31.2304,lng:121.4737},{name:"家里",lat:39.9042,lng:116.4074}],r=[];for(let a=0;a<n;a++){const d=2015+Math.floor(a/100),w=a%12+1,p=a%28+1;r.push({id:a,uuid:`photo-${a}`,fileName:`IMG_${d}${String(w).padStart(2,"0")}${String(p).padStart(2,"0")}_${a}.jpg`,takenAt:`${d}-${String(w).padStart(2,"0")}-${String(p).padStart(2,"0")}T10:30:00Z`,location:o[a%o.length],thumbnailPath:null})}return r},z=()=>{i.push("/search")},B=()=>{i.push("/timeline")},V=()=>{i.push("/albums")},D=()=>{i.push("/photos")},E=n=>{i.push(`/photo/${n.id||n.uuid}`)},N=()=>{m.value=!0},L=async()=>{g.value=!0,S.value=0,A.value=0;try{if($()){const n=await window.photoAPI.sync.start();l.success(`同步完成，共 ${n} 张照片`)}else await new Promise(n=>setTimeout(n,2e3)),l.success("同步完成，共 100 张照片（模拟数据）");await R()}catch{l.error("同步失败")}finally{g.value=!1,m.value=!1}},R=async()=>{x.value=!0;try{if($()){const n=await window.photoAPI.photos.getList({limit:12});_.value=n||[],v.value=n?.length||0}else _.value=b(12),v.value=100}catch(n){console.error("加载照片失败:",n),_.value=b(12),v.value=100}finally{x.value=!1}};return q(()=>{R()}),(n,o)=>{const r=c("n-icon"),a=c("n-card"),d=c("n-gi"),w=c("n-grid"),p=c("n-button"),j=c("n-progress"),G=c("n-modal");return h(),y("div",to,[o[18]||(o[18]=t("header",{class:"header"},[t("div",{class:"header-content"},[t("h1",{class:"logo"},"PhotoMind"),t("p",{class:"subtitle"},"智能相册管理")])],-1)),t("div",eo,[e(w,{cols:2,"x-gap":16,"y-gap":16},{default:s(()=>[e(d,null,{default:s(()=>[e(a,{class:"action-card",hoverable:"",onClick:z},{header:s(()=>[t("div",so,[e(r,{size:"24",color:"#5E6AD2"},{default:s(()=>[e(f(J))]),_:1}),o[2]||(o[2]=t("span",null,"智能搜索",-1))])]),default:s(()=>[o[3]||(o[3]=t("p",{class:"card-desc"},"用自然语言查找照片",-1)),o[4]||(o[4]=t("p",{class:"card-example"},'"2015年日本旅游的照片"',-1))]),_:1})]),_:1}),e(d,null,{default:s(()=>[e(a,{class:"action-card",hoverable:"",onClick:B},{header:s(()=>[t("div",no,[e(r,{size:"24",color:"#5E6AD2"},{default:s(()=>[e(f(K))]),_:1}),o[5]||(o[5]=t("span",null,"时间线",-1))])]),default:s(()=>[o[6]||(o[6]=t("p",{class:"card-desc"},"按时间浏览回忆",-1)),o[7]||(o[7]=t("p",{class:"card-example"},"查看往年今日",-1))]),_:1})]),_:1}),e(d,null,{default:s(()=>[e(a,{class:"action-card",hoverable:"",onClick:V},{header:s(()=>[t("div",ao,[e(r,{size:"24",color:"#5E6AD2"},{default:s(()=>[e(f(O))]),_:1}),o[8]||(o[8]=t("span",null,"智能相册",-1))])]),default:s(()=>[o[9]||(o[9]=t("p",{class:"card-desc"},"按人物/地点自动分类",-1)),o[10]||(o[10]=t("p",{class:"card-example"},"家人、地点、旅行",-1))]),_:1})]),_:1}),e(d,null,{default:s(()=>[e(a,{class:"action-card",hoverable:"",onClick:N},{header:s(()=>[t("div",lo,[e(r,{size:"24",color:"#5E6AD2"},{default:s(()=>[e(f(X))]),_:1}),o[11]||(o[11]=t("span",null,"同步照片",-1))])]),default:s(()=>[o[12]||(o[12]=t("p",{class:"card-desc"},"从 iCloud 同步照片",-1)),t("p",ro,T(v.value)+" 张照片",1)]),_:1})]),_:1})]),_:1})]),t("section",io,[t("div",uo,[o[14]||(o[14]=t("h2",null,"最近照片",-1)),e(p,{text:"",type:"primary",onClick:D},{icon:s(()=>[e(r,null,{default:s(()=>[e(f(oo))]),_:1})]),default:s(()=>[o[13]||(o[13]=C(" 查看全部 ",-1))]),_:1})]),e(F,{photos:_.value,loading:x.value,onPhotoClick:E},null,8,["photos","loading"])]),e(G,{show:m.value,"onUpdate:show":o[1]||(o[1]=M=>m.value=M),preset:"dialog",title:"同步照片"},{default:s(()=>[t("div",co,[o[15]||(o[15]=t("p",null,"从 iCloud Photos Library 同步照片到本地数据库。",-1)),g.value?(h(),Z(j,{key:0,type:"line",percentage:S.value,"indicator-placement":"inside"},null,8,["percentage"])):I("",!0),g.value?(h(),y("p",po,"正在同步: "+T(A.value)+" 张照片",1)):I("",!0)])]),action:s(()=>[e(p,{onClick:o[0]||(o[0]=M=>m.value=!1)},{default:s(()=>[...o[16]||(o[16]=[C("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:L,loading:g.value},{default:s(()=>[...o[17]||(o[17]=[C(" 开始同步 ",-1)])]),_:1},8,["loading"])]),_:1},8,["show"])])}}}),wo=Q(go,[["__scopeId","data-v-f576ad1e"]]);export{wo as default};
