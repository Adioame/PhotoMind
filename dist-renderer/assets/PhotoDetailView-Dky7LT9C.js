import{d as g,o as l,c as u,a as e,u as $,b as E,e as a,t as r,w as n,k as d,j as p,r as b,f as c,p as I,h as m,i as v,g as P}from"./index-b2OWAZnp.js";import{C as F}from"./CalendarToday24Regular-C2OphPV9.js";import{L as N}from"./Location24Regular-DGQcAQAS.js";import{I as H,_ as T}from"./_plugin-vue_export-helper-DZzl9uFm.js";const j={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},K=g({name:"ArrowDownload24Regular",render:function(f,i){return l(),u("svg",j,i[0]||(i[0]=[e("g",{fill:"none"},[e("path",{d:"M18.25 20.5a.75.75 0 1 1 0 1.5l-13 .005a.75.75 0 1 1 0-1.5l13-.004zM11.648 2.014l.102-.007a.75.75 0 0 1 .743.648l.007.102l-.001 13.685l3.722-3.72a.75.75 0 0 1 .976-.073l.085.073a.75.75 0 0 1 .072.976l-.073.084l-4.997 4.997a.75.75 0 0 1-.976.073l-.085-.073l-5.003-4.996a.75.75 0 0 1 .976-1.134l.084.072l3.719 3.714L11 2.756a.75.75 0 0 1 .648-.743l.102-.007l-.102.007z",fill:"currentColor"})],-1)]))}}),O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},X=g({name:"Dismiss24Regular",render:function(f,i){return l(),u("svg",O,i[0]||(i[0]=[e("g",{fill:"none"},[e("path",{d:"M4.397 4.554l.073-.084a.75.75 0 0 1 .976-.073l.084.073L12 10.939l6.47-6.47a.75.75 0 1 1 1.06 1.061L13.061 12l6.47 6.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L12 13.061l-6.47 6.47a.75.75 0 0 1-1.06-1.061L10.939 12l-6.47-6.47a.75.75 0 0 1-.072-.976l.073-.084l-.073.084z",fill:"currentColor"})],-1)]))}}),Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},q=g({name:"Document24Regular",render:function(f,i){return l(),u("svg",Y,i[0]||(i[0]=[e("g",{fill:"none"},[e("path",{d:"M18.5 20a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V4a.5.5 0 0 1 .5-.5h6V8a2 2 0 0 0 2 2h4.5v10zm-5-15.379L17.378 8.5H14a.5.5 0 0 1-.5-.5V4.621zm5.914 3.793l-5.829-5.828c-.026-.026-.058-.046-.085-.07a2.072 2.072 0 0 0-.219-.18c-.04-.027-.086-.045-.128-.068c-.071-.04-.141-.084-.216-.116a1.977 1.977 0 0 0-.624-.138C12.266 2.011 12.22 2 12.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9.828a2 2 0 0 0-.586-1.414z",fill:"currentColor"})],-1)]))}}),G={class:"photo-detail-container"},J={key:0,class:"loading-state"},Q={key:1,class:"photo-content"},U={class:"image-viewer"},W={class:"info-panel"},Z={class:"panel-header"},ee={class:"photo-meta"},te={class:"meta-item"},ae={class:"meta-content"},oe={class:"meta-value"},ne={key:0,class:"meta-item"},le={class:"meta-content"},se={class:"meta-value"},ie={key:1,class:"meta-item"},re={class:"meta-content"},ce={class:"meta-value"},ue={key:2,class:"meta-item"},de={class:"meta-content"},_e={class:"meta-value"},me={class:"action-buttons"},pe=g({__name:"PhotoDetailView",setup(w){const f=P(),i=I(),k=$(),x=b(!0),t=b(null),y=async()=>{const s=i.params.id;x.value=!0;try{t.value=await window.photoAPI.photos.getDetail(s),t.value||k.warning("照片不存在")}catch(o){console.error("加载照片失败:",o),k.error("加载照片失败")}finally{x.value=!1}},z=()=>{f.back()},S=s=>{if(!s)return"-";const o=new Date(s);return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")} ${String(o.getHours()).padStart(2,"0")}:${String(o.getMinutes()).padStart(2,"0")}`},B=s=>s?s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB":"-";return E(()=>{y()}),(s,o)=>{const C=c("n-spin"),R=c("n-image"),_=c("n-icon"),D=c("n-button"),h=c("n-descriptions-item"),V=c("n-descriptions"),M=c("n-collapse-item"),A=c("n-collapse"),L=c("n-empty");return l(),u("div",G,[x.value?(l(),u("div",J,[a(C,{size:"large"})])):t.value?(l(),u("div",Q,[e("div",U,[a(R,{src:t.value.thumbnailPath||t.value.thumbnail_url,"preview-src":t.value.thumbnailPath||t.value.thumbnail_url,"object-fit":"contain",style:{width:"100%",height:"100%"}},null,8,["src","preview-src"])]),e("div",W,[e("div",Z,[e("h2",null,r(t.value.fileName),1),a(D,{text:"",circle:"",onClick:z},{icon:n(()=>[a(_,{size:"20"},{default:n(()=>[a(m(X))]),_:1})]),_:1})]),e("div",ee,[e("div",te,[a(_,{size:"20",color:"#5E6AD2"},{default:n(()=>[a(m(F))]),_:1}),e("div",ae,[o[0]||(o[0]=e("span",{class:"meta-label"},"拍摄时间",-1)),e("span",oe,r(S(t.value.takenAt)),1)])]),t.value.location?.name?(l(),u("div",ne,[a(_,{size:"20",color:"#5E6AD2"},{default:n(()=>[a(m(N))]),_:1}),e("div",le,[o[1]||(o[1]=e("span",{class:"meta-label"},"拍摄地点",-1)),e("span",se,r(t.value.location.name),1)])])):d("",!0),t.value.width?(l(),u("div",ie,[a(_,{size:"20",color:"#5E6AD2"},{default:n(()=>[a(m(H))]),_:1}),e("div",re,[o[2]||(o[2]=e("span",{class:"meta-label"},"照片尺寸",-1)),e("span",ce,r(t.value.width)+" x "+r(t.value.height),1)])])):d("",!0),t.value.fileSize?(l(),u("div",ue,[a(_,{size:"20",color:"#5E6AD2"},{default:n(()=>[a(m(q))]),_:1}),e("div",de,[o[3]||(o[3]=e("span",{class:"meta-label"},"文件大小",-1)),e("span",_e,r(B(t.value.fileSize)),1)])])):d("",!0)]),a(A,null,{default:n(()=>[a(M,{title:"EXIF 信息",name:"exif"},{default:n(()=>[a(V,{column:1,"label-placement":"left"},{default:n(()=>[t.value.exif?.camera?(l(),p(h,{key:0,label:"相机"},{default:n(()=>[v(r(t.value.exif.camera),1)]),_:1})):d("",!0),t.value.exif?.aperture?(l(),p(h,{key:1,label:"光圈"},{default:n(()=>[v(" f/"+r(t.value.exif.aperture),1)]),_:1})):d("",!0),t.value.exif?.iso?(l(),p(h,{key:2,label:"ISO"},{default:n(()=>[v(r(t.value.exif.iso),1)]),_:1})):d("",!0),t.value.exif?.shutterSpeed?(l(),p(h,{key:3,label:"快门速度"},{default:n(()=>[v(r(t.value.exif.shutterSpeed)+"s ",1)]),_:1})):d("",!0)]),_:1})]),_:1})]),_:1}),e("div",me,[a(D,{type:"primary",block:""},{icon:n(()=>[a(_,null,{default:n(()=>[a(m(K))]),_:1})]),default:n(()=>[o[4]||(o[4]=v(" 下载原图 ",-1))]),_:1})])])])):(l(),p(L,{key:2,description:"照片不存在或已被删除"}))])}}}),we=T(pe,[["__scopeId","data-v-93227470"]]);export{we as default};
